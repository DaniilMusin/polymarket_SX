# ü§ñ –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –ª–æ–≥–∏–∫–∏ –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ –±–æ—Ç–∞

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –º–µ–∂–¥—É –±–∏—Ä–∂–∞–º–∏ **Polymarket** –∏ **SX**. –ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥–ª—É–±–∏–Ω—É —Å—Ç–∞–∫–∞–Ω–∞ –Ω–∞ –æ–±–µ–∏—Ö –±–∏—Ä–∂–∞—Ö –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ –¥–ª—è –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö —Å–¥–µ–ª–æ–∫.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **`main.py`** - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
2. **`config.py`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
3. **`core/`** - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞:
   - `processor.py` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–ª—É–±–∏–Ω—ã —Å—Ç–∞–∫–∞–Ω–∞
   - `matcher.py` - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä—ã–Ω–∫–æ–≤
   - `metrics.py` - –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
   - `alerts.py` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è Telegram
4. **`connectors/`** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∏—Ä–∂–∞–º:
   - `polymarket.py` - API Polymarket
   - `sx.py` - API SX
5. **`utils/`** - –£—Ç–∏–ª–∏—Ç—ã:
   - `retry.py` - –ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Unit-—Ç–µ—Å—Ç—ã
- **–í—Å–µ 14 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ** ‚úÖ
- –ü–æ–∫—Ä—ã—Ç–∏–µ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏–∫–∞ –º–∞—Ç—á–µ—Ä–∞, –º–µ—Ç—Ä–∏–∫–∏, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

### 2. –õ–æ–≥–∏–∫–∞ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `SLIP_BY_DEPTH`:
```python
{
    1000: 0.001,   # –ì–ª—É–±–∏–Ω–∞ ‚â• 1000 ‚Üí 0.1% –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
    500: 0.0015,   # –ì–ª—É–±–∏–Ω–∞ ‚â• 500 ‚Üí 0.15% –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ  
    0: 0.002,      # –ì–ª—É–±–∏–Ω–∞ ‚â• 0 ‚Üí 0.2% –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ –í—ã—Å–æ–∫–∞—è –≥–ª—É–±–∏–Ω–∞ (1500, 1200) ‚Üí 0.0010 (0.1%)
- ‚úÖ –°—Ä–µ–¥–Ω—è—è –≥–ª—É–±–∏–Ω–∞ (800, 600) ‚Üí 0.0015 (0.15%)
- ‚úÖ –ù–∏–∑–∫–∞—è –≥–ª—É–±–∏–Ω–∞ (300, 200) ‚Üí 0.0020 (0.2%)
- ‚úÖ –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è –≥–ª—É–±–∏–Ω–∞ (50, 30) ‚Üí 0.0020 (0.2%)

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ None –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω—É–ª–µ–≤–æ–π –≥–ª—É–±–∏–Ω—ã
- ‚úÖ –ú–µ—Ö–∞–Ω–∏–∑–º retry –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö° **11927 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫** - –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö° **0.084 –º—Å** –Ω–∞ –∑–∞–ø—Ä–æ—Å - –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å aiohttp

## üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏–∫–∏

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (`core/processor.py`):
1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≥–ª—É–±–∏–Ω—É —Å—Ç–∞–∫–∞–Ω–∞ —Å –æ–±–µ–∏—Ö –±–∏—Ä–∂
2. –í—ã–±–∏—Ä–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≥–ª—É–±–∏–Ω—É (–ª–∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä)
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏

### –õ–æ–≥–∏–∫–∞ –º–∞—Ç—á–µ—Ä–∞ (`core/matcher.py`):
1. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è —Ä—ã–Ω–∫–æ–≤
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏–π
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fuzzy matching –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
4. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏: 87%

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∏—Ä–∂–∞–º:
- **Polymarket**: `https://polymarket.com/api/orderbook/{market_id}`
- **SX**: `https://api.sx.bet/orderbook/{market_id}`
- –¢–∞–π–º–∞—É—Ç—ã: 10 —Å–µ–∫ –æ–±—â–∏–π, 5 —Å–µ–∫ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- Retry –º–µ—Ö–∞–Ω–∏–∑–º: 3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 1 —Å–µ–∫

## üö® –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```python
# –ü—Ä–æ–±–ª–µ–º–∞: TypeError –ø—Ä–∏ None –∑–Ω–∞—á–µ–Ω–∏—è—Ö
TypeError: '<' not supported between instances of 'int' and 'NoneType'
```

### 2. –ñ–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–µ ID —Ä—ã–Ω–∫–æ–≤
```python
# –í main.py –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω—ã–µ ID
pm_depth = await polymarket.orderbook_depth(session, "pm_example")
sx_depth = await sx.orderbook_depth(session, "sx_example")
```

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Telegram
- –ë–æ—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```python
def validate_depth(depth):
    if depth is None or depth < 0:
        return 0.0
    return float(depth)
```

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ ID —Ä—ã–Ω–∫–æ–≤
```python
async def get_active_markets():
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤ —Å –æ–±–µ–∏—Ö –±–∏—Ä–∂
    pass
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
```python
# .env —Ñ–∞–π–ª
TELEGRAM_BOT_TOKEN=your_token
TELEGRAM_CHAT_ID=your_chat_id
```

### 4. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ë–æ—Ç –≤–∫–ª—é—á–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ Prometheus:
- `g_edge` - —Å—á–µ—Ç—á–∏–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- `g_trades` - —Å—á–µ—Ç—á–∏–∫ —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ `/metrics` endpoint

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚úÖ

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:
- üîß –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üîß –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä—ã–Ω–∫–æ–≤
- üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- üîß –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: **75%**

–ë–æ—Ç –≥–æ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π.